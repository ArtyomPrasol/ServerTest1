#include <iostream>
#include <fstream>
#include <string>
#include <Windows.h>
using namespace std;

string* predmet = new string[4];


struct Student
{
	char Name;
	int val[4];
}A;

int answer;
int pred_size;

int main() {
	string nameR = "D:\Work\WWW\Server\REQUEST.bin";
	string nameA = "D:\Work\WWW\Server\ANSWER.bin";
	ofstream f_REQ;
	ifstream f_ANS;
	predmet[0] = "OOP";
	predmet[1] = "Physic";
	predmet[2] = "Math";
	predmet[3] = "DIf";

	while (true)
	{
		cout << "Enter Name: " << endl;
		cin >> A.Name;
		for (int i = 0; i < 4; i++) {
			cout << predmet[i] << " grade: " << endl;
			cin >> A.val[i];
		}
		f_REQ.open(nameR, ios::app | ios::binary);
		f_REQ.write((char*)&A, sizeof(A));
		f_REQ.close();
		

		f_ANS.open(nameA, ios::binary);
		f_ANS.seekg(0, ios::end);
		pred_size = f_ANS.tellg();
		while (pred_size >= f_ANS.tellg())
		{
			Sleep(100);
			f_ANS.seekg(0, ios::end);
		}
		f_ANS.seekg(pred_size, ios::beg);
		f_ANS.read((char*)&answer, sizeof(answer));
		f_ANS.close();

		switch (answer%10000)
		{
		case 2: cout << "No scholarship" << endl;
			for (int i = 0; i < 4; i++) if (answer%(int)pow(10,i)) cout << predmet[i] << "not counted." << endl;
			break;
		case 3: cout << "No scholarship" << endl;
			break;
		case 4: cout << "Scholarship = 1800" << endl;
			break;
		case 5: cout << "No scholarship = 2500" << endl;
			break;
		}
	}

	return 0;
}
